import{d as _,r as c,u as m,o as g,w as y,c as l,a as s,b as v,g as q,h as b,v as S,t as f,F as k,e as x,i as R,p as $,f as n,_ as w}from"./index-Bgr5SMnN.js";const C={class:"search-results"},I={class:"card"},N=["disabled"],U={key:0,class:"hint"},A={class:"cards"},B={class:"title"},D=["href"],F={class:"meta"},M=["href"],V=["href"],T={key:0,class:"hint"},X=_({__name:"SearchResults",setup(E){const d=m(),p=R(),r=c(d.query.q||""),u=c([]),i=c(!1),o=c("");async function h(){const t=r.value.trim();if(t){i.value=!0,o.value="",u.value=[];try{d.query.q!==t&&p.replace({path:"/search",query:{q:t}});const{papers:e}=await $.searchArxiv({q:t});u.value=e,e.length>0?o.value=`Showing ${e.length} result${e.length===1?"":"s"} for “${t}”`:o.value=`No results for “${t}”`}catch(e){o.value=String((e==null?void 0:e.message)??"Search failed")}finally{i.value=!1}}}return g(()=>{r.value&&h()}),y(()=>d.query.q,t=>{const e=t||"";e!==r.value&&(r.value=e,r.value&&h())}),(t,e)=>(n(),l("div",C,[s("header",I,[e[1]||(e[1]=s("h2",null,"Search results",-1)),s("form",{class:"bar",onSubmit:q(h,["prevent"])},[b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),placeholder:"Search arXiv (e.g. Attention Is All You Need)"},null,512),[[S,r.value]]),s("button",{class:"primary",disabled:i.value},"Search",8,N)],32),o.value?(n(),l("p",U,f(o.value),1)):v("",!0)]),s("div",A,[(n(!0),l(k,null,x(u.value,a=>(n(),l("div",{key:a.id,class:"card result"},[s("h3",B,[s("a",{href:`/paper/${encodeURIComponent(a.id)}`},f(a.title||a.id),9,D)]),s("div",F,[s("a",{href:`https://arxiv.org/abs/${encodeURIComponent(a.id)}`,target:"_blank",rel:"noreferrer"},"arXiv",8,M),e[2]||(e[2]=s("span",null," · ",-1)),s("a",{href:`https://arxiv.org/pdf/${encodeURIComponent(a.id)}.pdf`,target:"_blank",rel:"noreferrer"},"PDF",8,V)])]))),128)),!i.value&&!u.value.length?(n(),l("p",T,"No results. Try a different query.")):v("",!0)])]))}}),P=w(X,[["__scopeId","data-v-ac88b307"]]);export{P as default};
